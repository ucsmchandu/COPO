{% extends "base.html" %}
{% load static %}
{% block title %}Add CO{% endblock %}
{% block content %}
<link rel="stylesheet" href="{% static 'styles.css' %}">

<style>
    /* Background with gradient */
    .modern-container {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        /* background: linear-gradient(135deg, #7d45ba, #7183a3); Purple-Blue combo */
        padding: 30px;
    }

    /* Floating card */
    .floating-card {
        background: #ffffff;
        border-radius: 15px;
        box-shadow: 0px 8px 25px rgba(0, 0, 0, 0.15);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .floating-card:hover {
        transform: translateY(-5px);
        box-shadow: 0px 12px 30px rgba(0, 0, 0, 0.25);
    }

    /* Page Title */
    .page-title-co {
        color: #333;
        font-weight: 700;
        font-size: 1.8rem;
    }

    /* Labels */
    .form-label-modern {
        font-weight: 600;
        color: #2575fc;
        margin-bottom: 6px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    /* Inputs & Select */
    .form-control-modern,
    .select-modern,
    .textarea-modern {
        border-radius: 10px;
        border: 2px solid #e3e3e3;
        padding: 10px 14px;
        transition: 0.3s ease;
    }
    .form-control-modern:focus,
    .select-modern:focus,
    .textarea-modern:focus {
        border-color: #6a11cb;
        box-shadow: 0 0 8px rgba(106, 17, 203, 0.4);
        outline: none;
    }

    /* Gradient Button */
    .btn-gradient-co {
        background: linear-gradient(45deg, #ff512f, #dd2476); /* Red-Pink combo */
        color: #fff;
        font-weight: 600;
        padding: 12px;
        border-radius: 12px;
        border: none;
        transition: 0.3s ease;
    }
    .btn-gradient-co:hover {
        background: linear-gradient(45deg, #dd2476, #ff512f);
        box-shadow: 0px 5px 15px rgba(255, 81, 47, 0.4);
    }

    /* Invalid feedback color */
    .invalid-feedback {
        color: #e74c3c;
        font-size: 0.9rem;
    }
</style>

<div class="modern-container" style="margin-top: 30px;">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-md-10">
                <div class="co-card floating-card p-5">
                    <h2 class="page-title-co text-center mb-5">
                        <i class="fas fa-plus-circle me-2 text-primary"></i>Add Course Outcome (CO)
                    </h2>
                    
                    <form method="post" class="needs-validation" novalidate>
                        {% csrf_token %}
                        
                        <div class="mb-4">
                            <label for="course" class="form-label-modern">
                                <i class="fas fa-book"></i>Select Course
                            </label>
                            <select id="course" name="course" class="form-control form-control-modern select-modern" required>
                                <option value="" disabled selected>Choose a course...</option>
                                {% for course in courses %}
                                    <option value="{{ course.id }}">{{ course.code }} - {{ course.name }}</option>
                                {% endfor %}
                            </select>
                            <div class="invalid-feedback">
                                Please select a valid course.
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label for="co_number" class="form-label-modern">
                                <i class="fas fa-hashtag"></i>CO Number
                            </label>
                            <input type="text" id="co_number" name="co_number" class="form-control form-control-modern" 
                                   required placeholder="e.g., CO1, CO2, CO3" maxlength="10" pattern="CO\d+">
                            <div class="invalid-feedback">
                                Please enter a valid CO number (e.g., CO1, CO2).
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label for="max_marks" class="form-label-modern">
                                <i class="fas fa-star"></i>Maximum Marks
                            </label>
                            <input type="number" id="max_marks" name="max_marks" class="form-control form-control-modern" 
                                   required min="1" max="100" placeholder="Enter maximum marks for this CO">
                            <div class="invalid-feedback">
                                Please enter valid marks between 1 and 100.
                            </div>
                        </div>
                        
                        <div class="mb-5">
                            <label for="description" class="form-label-modern">
                                <i class="fas fa-align-left"></i>Description
                            </label>
                            <textarea id="description" name="description" class="form-control form-control-modern textarea-modern" 
                                      rows="4" required placeholder="Enter detailed description of the Course Outcome..." 
                                      maxlength="500"></textarea>
                            <div class="invalid-feedback">
                                Please provide a description for the CO.
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-gradient-co w-100">
                            <i class="fas fa-plus-circle me-2"></i>
                            <span>Add Course Outcome</span>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<script>
    // Simple Bootstrap-like validation (no animation)
    (function() {
        'use strict';
        window.addEventListener('load', function() {
            var forms = document.getElementsByClassName('needs-validation');
            Array.prototype.forEach.call(forms, function(form) {
                form.addEventListener('submit', function(event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
</script>
{% endblock %}
